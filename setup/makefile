# setup/Makefile
.PHONY: up down restart logs

# List of service directories
SERVICES = lorawan-server persistence Monitor_Atlas Monitor_Hermes

up:
	@echo "üöÄ Starting all services..."
	@for service in $(SERVICES); do \
		echo "‚û°Ô∏è  Starting $$service..."; \
		docker compose -f $$service/docker-compose.yml up -d || exit 1; \
	done
	@echo "‚úÖ All services are up and running!"

down:
	@echo "üõë Stopping all services..."
	@for service in $(SERVICES); do \
		echo "‚¨áÔ∏è  Stopping $$service..."; \
		docker compose -f $$service/docker-compose.yml down || true; \
	done
	@echo "‚úÖ All services stopped."

restart:
	@$(MAKE) down
	@$(MAKE) up

logs:
	@for service in $(SERVICES); do \
		echo "üìú Logs for $$service:"; \
		docker compose -f $$service/docker-compose.yml logs --tail=20; \
	done

